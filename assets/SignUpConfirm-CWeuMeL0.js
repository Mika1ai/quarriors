import{u as y,_ as R,a as N}from"./vee-validate-C37l0PDH.js";import{u as k,a as P,r as T,m as C,q as I,s as w,R as i,f as A,g as B,w as e,v as F,o as M,b as a,_ as O,d as l,t as p,i as $,j as r,k as E,l as G,e as m}from"./index-DAPp9zWE.js";const x={__name:"SignUpConfirm",setup(H){const _=k(),d=P(),s=T("");C(()=>{const o=w(),t=I();s.value=t.query.email,s.value||o.push({path:i.SIGN_UP.PATH})});const{meta:c,value:n,errorMessage:f}=y("otp",F),S=async()=>{await m.auth.resendOtp({email:s.value})},g=async()=>{await m.auth.verifyEmail({credentials:{email:s.value,token:n.value},userStore:_,relationshipsStore:d})},h=A(()=>c.valid);return(o,t)=>{const v=$,u=O,U=N,V=R;return M(),B(V,null,{footer:e(()=>[a(u,{to:r(i).SIGN_IN.PATH},{default:e(()=>[l(p(o.$t("auth.sign_in")),1)]),_:1},8,["to"]),a(u,{to:r(i).SIGN_UP.PATH},{default:e(()=>[l(p(o.$t("auth.sign_up")),1)]),_:1},8,["to"])]),default:e(()=>[a(U,{onOnSubmit:g},{header:e(()=>[...t[1]||(t[1]=[G("h2",null,"Confirm",-1)])]),default:e(()=>[a(v,{modelValue:r(n),"onUpdate:modelValue":t[0]||(t[0]=b=>E(n)?n.value=b:null),name:"otp",type:"text","error-message":r(f),placeholder:o.$t("auth.otp")},null,8,["modelValue","error-message","placeholder"])]),footer:e(()=>[a(u,{type:"button",onClick:S},{default:e(()=>[...t[2]||(t[2]=[l(" Resend OTP ",-1)])]),_:1}),a(u,{type:"submit",disabled:!h.value},{default:e(()=>[l(p(o.$t("auth.submit")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})}}};export{x as default};
